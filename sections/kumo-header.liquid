{{ 'kumo-styles.css' | asset_url | stylesheet_tag }}

<header class="kumo-fixed kumo-top-0 kumo-left-0 kumo-right-0 kumo-z-50 kumo-px-4 kumo-py-4">
  <div class="kumo-container kumo-mx-auto">
    <nav class="kumo-flex kumo-items-center kumo-justify-between kumo-bg-card/80 kumo-backdrop-blur-md kumo-rounded-full kumo-px-6 kumo-py-3 kumo-shadow-soft">
      <!-- Left Navigation (Desktop) -->
      <div class="kumo-hidden kumo-md:flex kumo-items-center kumo-gap-8">
        {% for block in section.blocks %}
          {% if block.type == 'nav_link' %}
            <a
              href="{{ block.settings.link }}"
              class="kumo-text-sm kumo-font-medium kumo-text-muted-foreground kumo-hover:text-foreground kumo-transition-colors"
              {{ block.shopify_attributes }}
            >
              {{ block.settings.label }}
            </a>
          {% endif %}
        {% endfor %}
      </div>

      <!-- Mobile Menu Spacer -->
      <div class="kumo-md:hidden kumo-w-10"></div>

      <!-- Center Logo -->
      <a href="{{ routes.root_url }}" class="kumo-flex kumo-items-center">
        {% if section.settings.logo != blank %}
          {{ section.settings.logo | image_url: width: 200 | image_tag:
            loading: 'eager',
            class: 'kumo-h-12 kumo-w-auto kumo-object-contain',
            alt: shop.name
          }}
        {% else %}
          <span class="kumo-text-2xl kumo-font-bold kumo-text-foreground">{{ shop.name }}</span>
        {% endif %}
      </a>

      <!-- Right - Cart -->
      <a
        href="{{ routes.cart_url }}"
        class="kumo-relative kumo-p-2 kumo-rounded-full kumo-hover:bg-accent kumo-transition-colors"
        aria-label="Panier"
      >
        <svg class="kumo-w-5 kumo-h-5 kumo-text-foreground" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119 1.007zM8.625 10.5a.375.375 0 11-.75 0 .375.375 0 01.75 0zm7.5 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
        </svg>
        <span class="kumo-absolute kumo--top-0.5 kumo--right-0.5 kumo-w-4 kumo-h-4 kumo-bg-primary kumo-text-primary-foreground kumo-text-10px kumo-font-bold kumo-rounded-full kumo-flex kumo-items-center kumo-justify-center">
          {{ cart.item_count }}
        </span>
      </a>
    </nav>
  </div>
</header>

{% schema %}
{
  "name": "KUMO - Header",
  "tag": "section",
  "class": "kumo-section-header",
  "settings": [
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo"
    },
    {
      "type": "range",
      "id": "logo_height",
      "label": "Hauteur du logo",
      "min": 24,
      "max": 80,
      "step": 4,
      "default": 48,
      "unit": "px"
    }
  ],
  "blocks": [
    {
      "type": "nav_link",
      "name": "Lien navigation",
      "settings": [
        {
          "type": "text",
          "id": "label",
          "label": "Texte",
          "default": "Collection"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Lien"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "KUMO - Header",
      "blocks": [
        {
          "type": "nav_link",
          "settings": {
            "label": "Collection",
            "link": "#collection"
          }
        },
        {
          "type": "nav_link",
          "settings": {
            "label": "Notre Histoire",
            "link": "#story"
          }
        }
      ]
    }
  ]
}
{% endschema %}
